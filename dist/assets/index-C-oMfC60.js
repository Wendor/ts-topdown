var e=Object.defineProperty,t=(t,s,r)=>((t,s,r)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r)(t,"symbol"!=typeof s?s+"":s,r);import{p as s}from"./phaser-DM0uoNMb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class r extends s.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}create(){this.scene.start("Preloader")}}class i extends s.Scene{constructor(){super("GameOver"),t(this,"camera"),t(this,"background"),t(this,"gameover_text")}create(){this.camera=this.cameras.main,this.camera.setBackgroundColor(16711680),this.background=this.add.image(512,384,"background"),this.background.setAlpha(.5),this.gameover_text=this.add.text(512,384,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}),this.gameover_text.setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}class a extends Phaser.GameObjects.Sprite{constructor(e,t,s,r){super(e,t,s,r),this.scene.add.existing(this)}}class o extends Phaser.Physics.Arcade.Sprite{constructor(e,s,r,i){super(e,s,r,i.base),t(this,"moveSpeed",5),t(this,"sprites"),this.sprites={base:new a(e,s,r,i.base),hair:new a(e,s,r,i.hair),tools:new a(e,s,r,i.tools)},this.scene.physics.add.existing(this),this.setSize(12,12),this.setOffset(this.width/2-6,this.height/2-4);const o=this.scene.anims;o.create({key:"player_base_idle",frames:o.generateFrameNumbers("player_base_idle",{start:0,end:8}),frameRate:9,repeat:-1}),o.create({key:"player_hair_idle",frames:o.generateFrameNumbers("player_hair_idle",{start:0,end:8}),frameRate:9,repeat:-1}),o.create({key:"player_tools_idle",frames:o.generateFrameNumbers("player_tools_idle",{start:0,end:8}),frameRate:9,repeat:-1}),o.create({key:"player_base_run",frames:o.generateFrameNumbers("player_base_run",{start:0,end:7}),frameRate:9,repeat:-1}),o.create({key:"player_hair_run",frames:o.generateFrameNumbers("player_hair_run",{start:0,end:7}),frameRate:9,repeat:-1}),o.create({key:"player_tools_run",frames:o.generateFrameNumbers("player_tools_run",{start:0,end:7}),frameRate:9,repeat:-1})}update(e,t){var s,r;const i=null==(s=this.scene.input.keyboard)?void 0:s.createCursorKeys(),a=null==(r=this.scene.input.keyboard)?void 0:r.addKeys({up:Phaser.Input.Keyboard.KeyCodes.W,left:Phaser.Input.Keyboard.KeyCodes.A,down:Phaser.Input.Keyboard.KeyCodes.S,right:Phaser.Input.Keyboard.KeyCodes.D});if(!this.body||!i||!a)return;this.setVelocity(0,0);let o=this.moveSpeed;const n=[i.down.isDown||a.down.isDown,i.left.isDown||a.left.isDown,i.right.isDown||a.right.isDown,i.up.isDown||a.up.isDown].filter((e=>e)).length;o=n>1?.66*this.moveSpeed:this.moveSpeed,n>0?this.startAnimation("run"):this.startAnimation("idle"),(i.up.isDown||a.up.isDown)&&(this.body.velocity.y+=-t*o),(i.down.isDown||a.down.isDown)&&(this.body.velocity.y+=t*o),(i.left.isDown||a.left.isDown)&&(this.body.velocity.x+=-t*o,this.flipX=!0),(i.right.isDown||a.right.isDown)&&(this.body.velocity.x+=t*o,this.flipX=!1),this.syncSpritesPositions()}syncSpritesPositions(){[...Object.values(this.sprites)].forEach((e=>{e.setPosition(this.x,this.y),e.flipX=this.flipX}))}startAnimation(e){this.sprites.hair.play("player_hair_"+e,!0),this.sprites.base.play("player_base_"+e,!0),this.sprites.tools.play("player_tools_"+e,!0)}}class n extends s.Scene{constructor(){super("Game"),t(this,"player"),t(this,"fpsMeter")}create(){const e=this.make.tilemap({key:"home"}),t=e.addTilesetImage("base_tiles","base_tiles",16,16);if(!t)throw new Error("TILESET NOT CREATED");const s=e.createLayer("ground",t,0,0),r=e.createLayer("objects",t,0,0);e.createLayer("water",t,0,0),e.createLayer("top",t,0,0),e.createLayer("trees",t,0,0);const i=e.createLayer("walls",t,0,0);if(null==i||i.setVisible(!1),!s||!i||!r)throw new Error("LAYERS NOT CREATED");this.player=new o(this,100,100,{base:"player_base_idle",hair:"player_hair_idle",tools:"player_tools_idle"}),this.cameras.main.startFollow(this.player),this.cameras.main.setBounds(0,0,e.widthInPixels,e.heightInPixels),this.physics.world.setBounds(0,0,e.widthInPixels,e.heightInPixels),this.physics.add.collider(this.player,i),i.setCollisionByExclusion([-1]),this.player.setCollideWorldBounds(!0),this.fpsMeter=new Phaser.GameObjects.Text(this,2,2,"0",{font:"14px Arial",color:"#ffff00"}),this.add.existing(this.fpsMeter),this.sound.play("background_music")}update(e,t){var s;null==(s=this.player)||s.update(e,t),this.fpsMeter.setText(Math.round(this.game.loop.actualFps).toString())}}class l extends s.Scene{constructor(){super("MainMenu"),t(this,"background"),t(this,"logo"),t(this,"title")}create(){this.scene.start("Game"),this.background=this.add.image(512,384,"background"),this.logo=this.add.image(512,300,"logo"),this.title=this.add.text(512,460,"Main Menu",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("Game")}))}}class d extends s.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png"),this.load.image("base_tiles","Sunnyside_World_ASSET_PACK_V2.1/Sunnyside_World_Assets/Tileset/spr_tileset_sunnysideworld_16px.png"),this.load.tilemapTiledJSON("home","tilemaps/home.tmj"),this.load.audio("background_music",["cozy-lofi-beat-split-memmories-248205.mp3"]),this.load.spritesheet("player_base_idle","Sunnyside_World_ASSET_PACK_V2.1/Sunnyside_World_Assets/Characters/Human/IDLE/base_idle_strip9.png",{frameWidth:96,frameHeight:64}),this.load.spritesheet("player_hair_idle","Sunnyside_World_ASSET_PACK_V2.1/Sunnyside_World_Assets/Characters/Human/IDLE/bowlhair_idle_strip9.png",{frameWidth:96,frameHeight:64}),this.load.spritesheet("player_tools_idle","Sunnyside_World_ASSET_PACK_V2.1/Sunnyside_World_Assets/Characters/Human/IDLE/tools_idle_strip9.png",{frameWidth:96,frameHeight:64}),this.load.spritesheet("player_base_run","Sunnyside_World_ASSET_PACK_V2.1/Sunnyside_World_Assets/Characters/Human/RUN/base_run_strip8.png",{frameWidth:96,frameHeight:64}),this.load.spritesheet("player_hair_run","Sunnyside_World_ASSET_PACK_V2.1/Sunnyside_World_Assets/Characters/Human/RUN/bowlhair_run_strip8.png",{frameWidth:96,frameHeight:64}),this.load.spritesheet("player_tools_run","Sunnyside_World_ASSET_PACK_V2.1/Sunnyside_World_Assets/Characters/Human/RUN/tools_run_strip8.png",{frameWidth:96,frameHeight:64})}create(){this.scene.start("MainMenu")}}const h={type:Phaser.WEBGL,width:480,height:320,parent:"game-container",backgroundColor:"#028af8",pixelArt:!0,physics:{default:"arcade",arcade:{}},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,snap:{width:480,height:320},min:{width:480,height:320}},scene:[r,d,l,n,i]};document.addEventListener("DOMContentLoaded",(()=>{new s.Game({...h,parent:"game-container"})}));
